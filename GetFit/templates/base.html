<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Welcome to GetFit</title>
</head>
<body>
  <nav>
    {% if user.is_authenticated %}
    <a href="{% url 'logout' %}">Logout</a>
    <a href="{% url 'index' %}">Home</a>   
    <a class="nav-link" href="{% url 'newsfeed' %}">Newsfeed</a>
    <a href="{% url 'user_list' %}">Users</a>
    <a href="{% url 'chat_list' %}">Chats</a>
    <a href="{% url 'groups_list' %}">Groups</a>
    <a href="{% url 'pages/user_profile' user.id %}">Profile</a>
    <a class="nav-link" href="{% url 'following' user.id %}">Following</a>
    <a class="nav-link" href="{% url 'followers' user.id %}">Followers</a>
    <a class="nav-link" href="{% url 'settings' %}">Settings</a>
    <form method="GET" action="{% url 'search' %}">
      <input type="text" name="q" placeholder="Search...">
      <button type="submit">Search</button>
    </form> 
    <input type="text" id="user-input">
<div id="chat-container"></div>
  </form>
  {% else %}
      <a href="{% url 'login' %}">Login</a>
      <a href="{% url 'register' %}">Register</a>
    {% endif %}
  </nav>
  {% block content %}
    <h1>Welcome to GetFit!</h1>
    <p>We are here to help you get fit and healthy!</p>
  {% endblock %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    // Function to send a user message and receive a chatbot reply
    function sendUserMessage(message) {
        $.getJSON('/chatbot/', { input: message }, function(data) {
            var chatbotReply = data.reply;
            displayChatbotReply(chatbotReply);
        });
    }

    // Function to display the chatbot's reply in the chat container
    function displayChatbotReply(reply) {
        var $chatContainer = $('#chat-container');
        $chatContainer.append('<p><strong>Chatbot:</strong> ' + reply + '</p>');
    }

    // Event handler for user input
    $('#user-input').keypress(function(event) {
        if (event.which === 13) {
            var userInput = $(this).val();
            displayUserMessage(userInput);
            sendUserMessage(userInput);
            $(this).val('');
        }
    });

    // Function to display the user's message in the chat container
    function displayUserMessage(message) {
        var $chatContainer = $('#chat-container');
        $chatContainer.append('<p><strong>User:</strong> ' + message + '</p>');
    }
});
</script>
</body>
</html>
